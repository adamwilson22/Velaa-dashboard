<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Password - Fleet Management System</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/responsive.css">
</head>
<body class="page page--auth">
    <div class="auth-layout">
        <!-- Create Password Form Section -->
        <div class="auth-layout__form">
            <div class="auth-layout__content">
                <div class="auth-layout__logo">FM</div>
                <h1 class="auth-layout__title">Create Your Password</h1>
                <p class="auth-layout__subtitle">
                    Welcome to Fleet Management System! Please create a secure password for your account.
                </p>

                <form class="form" action="dashboard.html" method="post">
                    <div class="form__group">
                        <label class="form__label" for="password">New Password *</label>
                        <input
                            type="password"
                            id="password"
                            name="password"
                            class="form__input form__input--password"
                            placeholder="Enter your password"
                            required
                        >
                        <small class="form__help">Must be at least 8 characters with uppercase, lowercase, and numbers</small>
                    </div>

                    <div class="form__group">
                        <label class="form__label" for="confirmPassword">Confirm Password *</label>
                        <input
                            type="password"
                            id="confirmPassword"
                            name="confirmPassword"
                            class="form__input form__input--password"
                            placeholder="Confirm your password"
                            required
                        >
                    </div>

                    <!-- Password Requirements Checklist -->
                    <div class="form__group">
                        <div id="requirements" style="background-color: var(--color-gray-light); padding: var(--spacing-md); border-radius: var(--border-radius-md);">
                            <h4 style="font-size: var(--font-size-sm); font-weight: 600; color: var(--color-primary); margin-bottom: var(--spacing-sm);">
                                Password Requirements:
                            </h4>
                            <div style="display: flex; flex-direction: column; gap: var(--spacing-xs);">
                                <div id="req-length" class="requirement" style="display: flex; align-items: center; gap: var(--spacing-sm); font-size: var(--font-size-sm);">
                                    <span class="req-icon">❌</span>
                                    <span>At least 8 characters long</span>
                                </div>
                                <div id="req-uppercase" class="requirement" style="display: flex; align-items: center; gap: var(--spacing-sm); font-size: var(--font-size-sm);">
                                    <span class="req-icon">❌</span>
                                    <span>Contains uppercase letter</span>
                                </div>
                                <div id="req-lowercase" class="requirement" style="display: flex; align-items: center; gap: var(--spacing-sm); font-size: var(--font-size-sm);">
                                    <span class="req-icon">❌</span>
                                    <span>Contains lowercase letter</span>
                                </div>
                                <div id="req-number" class="requirement" style="display: flex; align-items: center; gap: var(--spacing-sm); font-size: var(--font-size-sm);">
                                    <span class="req-icon">❌</span>
                                    <span>Contains number</span>
                                </div>
                                <div id="req-match" class="requirement" style="display: flex; align-items: center; gap: var(--spacing-sm); font-size: var(--font-size-sm);">
                                    <span class="req-icon">❌</span>
                                    <span>Passwords match</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Password Strength Indicator -->
                    <div class="form__group">
                        <div id="strengthIndicator" style="display: none;">
                            <div style="display: flex; align-items: center; gap: var(--spacing-sm); margin-bottom: var(--spacing-xs);">
                                <span style="font-size: var(--font-size-sm); font-weight: 600;">Password Strength:</span>
                                <span id="strengthText" style="font-size: var(--font-size-sm); font-weight: 600;">Weak</span>
                            </div>
                            <div style="width: 100%; height: 8px; background-color: var(--color-gray-light); border-radius: 4px; overflow: hidden;">
                                <div id="strengthBar" style="height: 100%; width: 0%; border-radius: 4px; transition: all var(--transition-normal);"></div>
                            </div>
                        </div>
                    </div>

                    <div class="form__group">
                        <div class="form__checkbox">
                            <input
                                type="checkbox"
                                id="terms"
                                name="terms"
                                class="form__checkbox-input"
                                required
                            >
                            <label for="terms" style="margin: 0;">
                                I agree to the <a href="#" style="color: var(--color-primary);">Terms of Service</a> and <a href="#" style="color: var(--color-primary);">Privacy Policy</a>
                            </label>
                        </div>
                    </div>

                    <button type="submit" class="btn btn--primary btn--full" id="createBtn">
                        Create Password & Continue
                    </button>

                    <div class="form__group" style="text-align: center; margin-top: var(--spacing-xl); border-top: 1px solid var(--color-gray-medium); padding-top: var(--spacing-xl);">
                        <a href="login.html" class="text-secondary">← Back to Sign In</a>
                    </div>
                </form>
            </div>
        </div>

        <!-- Branding Section -->
        <div class="auth-layout__branding">
            <div class="auth-layout__content">
                <h2 style="color: var(--color-white); font-size: var(--font-size-3xl); font-weight: 600; margin-bottom: var(--spacing-lg);">
                    Secure Your Account
                </h2>
                <p style="color: rgba(255, 255, 255, 0.8); font-size: var(--font-size-lg); line-height: 1.6;">
                    Your password is the key to accessing your fleet management dashboard. Choose a strong,
                    unique password that you'll remember easily but others can't guess.
                </p>

                <div style="margin-top: var(--spacing-3xl);">
                    <div style="display: flex; align-items: center; margin-bottom: var(--spacing-lg);">
                        <div style="width: 20px; height: 20px; background-color: #28a745; border-radius: 50%; margin-right: var(--spacing-md); display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">✓</div>
                        <span style="color: var(--color-white);">Never share your password</span>
                    </div>
                    <div style="display: flex; align-items: center; margin-bottom: var(--spacing-lg);">
                        <div style="width: 20px; height: 20px; background-color: #28a745; border-radius: 50%; margin-right: var(--spacing-md); display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">✓</div>
                        <span style="color: var(--color-white);">Use different passwords for different accounts</span>
                    </div>
                    <div style="display: flex; align-items: center; margin-bottom: var(--spacing-lg);">
                        <div style="width: 20px; height: 20px; background-color: #28a745; border-radius: 50%; margin-right: var(--spacing-md); display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">✓</div>
                        <span style="color: var(--color-white);">Enable two-factor authentication when available</span>
                    </div>
                    <div style="display: flex; align-items: center;">
                        <div style="width: 20px; height: 20px; background-color: #28a745; border-radius: 50%; margin-right: var(--spacing-md); display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">✓</div>
                        <span style="color: var(--color-white);">Change password regularly for better security</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="js/scripts.js"></script>
    <script>
        const passwordInput = document.getElementById('password');
        const confirmPasswordInput = document.getElementById('confirmPassword');
        const requirements = document.getElementById('requirements');
        const strengthIndicator = document.getElementById('strengthIndicator');
        const strengthText = document.getElementById('strengthText');
        const strengthBar = document.getElementById('strengthBar');
        const createBtn = document.getElementById('createBtn');

        const reqElements = {
            length: document.getElementById('req-length'),
            uppercase: document.getElementById('req-uppercase'),
            lowercase: document.getElementById('req-lowercase'),
            number: document.getElementById('req-number'),
            match: document.getElementById('req-match')
        };

        function updateRequirement(reqId, isMet) {
            const element = reqElements[reqId];
            const icon = element.querySelector('.req-icon');

            if (isMet) {
                icon.textContent = '✅';
                icon.style.color = '#28a745';
                element.style.color = '#28a745';
            } else {
                icon.textContent = '❌';
                icon.style.color = '#dc3545';
                element.style.color = 'inherit';
            }
        }

        function checkPasswordRequirements(password) {
            const requirements = {
                length: password.length >= 8,
                uppercase: /[A-Z]/.test(password),
                lowercase: /[a-z]/.test(password),
                number: /\d/.test(password)
            };

            Object.keys(requirements).forEach(req => {
                updateRequirement(req, requirements[req]);
            });

            return Object.values(requirements).every(req => req);
        }

        function checkPasswordsMatch() {
            const password = passwordInput.value;
            const confirmPassword = confirmPasswordInput.value;
            const match = password === confirmPassword && password.length > 0;

            updateRequirement('match', match);
            return match;
        }

        function calculatePasswordStrength(password) {
            let strength = 0;
            let score = 0;

            if (password.length >= 8) score += 20;
            if (password.length >= 12) score += 10;
            if (/[a-z]/.test(password)) score += 20;
            if (/[A-Z]/.test(password)) score += 20;
            if (/\d/.test(password)) score += 20;
            if (/[^A-Za-z0-9]/.test(password)) score += 10;

            if (score <= 40) {
                strength = { text: 'Weak', color: '#dc3545', width: '33%' };
            } else if (score <= 70) {
                strength = { text: 'Medium', color: '#ffc107', width: '66%' };
            } else {
                strength = { text: 'Strong', color: '#28a745', width: '100%' };
            }

            return strength;
        }

        function updatePasswordStrength(password) {
            if (password.length === 0) {
                strengthIndicator.style.display = 'none';
                return;
            }

            strengthIndicator.style.display = 'block';
            const strength = calculatePasswordStrength(password);

            strengthText.textContent = strength.text;
            strengthText.style.color = strength.color;
            strengthBar.style.width = strength.width;
            strengthBar.style.backgroundColor = strength.color;
        }

        function validateForm() {
            const password = passwordInput.value;
            const confirmPassword = confirmPasswordInput.value;

            const requirementsMet = checkPasswordRequirements(password);
            const passwordsMatch = checkPasswordsMatch();

            const isValid = requirementsMet && passwordsMatch && password.length > 0;

            createBtn.disabled = !isValid;
            createBtn.style.opacity = isValid ? '1' : '0.6';

            return isValid;
        }

        passwordInput.addEventListener('input', (e) => {
            const password = e.target.value;
            checkPasswordRequirements(password);
            updatePasswordStrength(password);
            checkPasswordsMatch();
            validateForm();
        });

        confirmPasswordInput.addEventListener('input', () => {
            checkPasswordsMatch();
            validateForm();
        });

        // Initialize
        validateForm();

        document.querySelector('form').addEventListener('submit', (e) => {
            if (!validateForm()) {
                e.preventDefault();
                alert('Please ensure your password meets all requirements and matches the confirmation.');
            }
        });
    </script>
</body>
</html>

