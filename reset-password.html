<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reset Password - Fleet Management System</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/responsive.css">
</head>
<body class="page page--auth">
    <div class="auth-layout">
        <!-- Reset Password Form Section -->
        <div class="auth-layout__form">
            <div class="auth-layout__content">
                <div class="auth-layout__logo">FM</div>
                <h1 class="auth-layout__title">Set New Password</h1>
                <p class="auth-layout__subtitle">
                    Your new password must be different from previously used passwords.
                </p>

                <form class="form" action="reset-success.html" method="post">
                    <div class="form__group">
                        <label class="form__label" for="password">New Password</label>
                        <input
                            type="password"
                            id="password"
                            name="password"
                            class="form__input form__input--password"
                            placeholder="Enter new password"
                            required
                        >
                        <small class="form__help">Must be at least 8 characters with numbers and symbols</small>
                    </div>

                    <div class="form__group">
                        <label class="form__label" for="confirmPassword">Confirm New Password</label>
                        <input
                            type="password"
                            id="confirmPassword"
                            name="confirmPassword"
                            class="form__input form__input--password"
                            placeholder="Confirm new password"
                            required
                        >
                    </div>

                    <div class="form__group">
                        <div id="passwordMatch" class="form__error" style="display: none;">
                            Passwords do not match
                        </div>
                        <div id="passwordStrength" class="form__help" style="display: none;">
                            Password strength: <span id="strengthText">Weak</span>
                        </div>
                    </div>

                    <button type="submit" class="btn btn--primary btn--full" id="resetBtn">
                        Reset Password
                    </button>

                    <div class="form__group" style="text-align: center; margin-top: var(--spacing-xl); border-top: 1px solid var(--color-gray-medium); padding-top: var(--spacing-xl);">
                        <a href="login.html" class="text-secondary">‚Üê Back to Sign In</a>
                    </div>
                </form>
            </div>
        </div>

        <!-- Branding Section -->
        <div class="auth-layout__branding">
            <div class="auth-layout__content">
                <h2 style="color: var(--color-white); font-size: var(--font-size-3xl); font-weight: 600; margin-bottom: var(--spacing-lg);">
                    Secure Your Account
                </h2>
                <p style="color: rgba(255, 255, 255, 0.8); font-size: var(--font-size-lg); line-height: 1.6;">
                    Create a strong password to protect your account. Make sure it's unique and not used
                    on other websites. Your security is our top priority.
                </p>

                <div style="margin-top: var(--spacing-3xl);">
                    <div style="display: flex; align-items: center; margin-bottom: var(--spacing-lg);">
                        <div style="width: 20px; height: 20px; background-color: var(--color-white); border-radius: 50%; margin-right: var(--spacing-md);"></div>
                        <span style="color: var(--color-white);">Use at least 8 characters</span>
                    </div>
                    <div style="display: flex; align-items: center; margin-bottom: var(--spacing-lg);">
                        <div style="width: 20px; height: 20px; background-color: var(--color-white); border-radius: 50%; margin-right: var(--spacing-md);"></div>
                        <span style="color: var(--color-white);">Include numbers and symbols</span>
                    </div>
                    <div style="display: flex; align-items: center;">
                        <div style="width: 20px; height: 20px; background-color: var(--color-white); border-radius: 50%; margin-right: var(--spacing-md);"></div>
                        <span style="color: var(--color-white);">Mix uppercase and lowercase</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="js/scripts.js"></script>
    <script>
        const passwordInput = document.getElementById('password');
        const confirmPasswordInput = document.getElementById('confirmPassword');
        const passwordMatchDiv = document.getElementById('passwordMatch');
        const passwordStrengthDiv = document.getElementById('passwordStrength');
        const strengthText = document.getElementById('strengthText');
        const resetBtn = document.getElementById('resetBtn');

        function checkPasswordStrength(password) {
            let strength = 0;
            if (password.length >= 8) strength++;
            if (/[a-z]/.test(password)) strength++;
            if (/[A-Z]/.test(password)) strength++;
            if (/[0-9]/.test(password)) strength++;
            if (/[^A-Za-z0-9]/.test(password)) strength++;

            if (strength <= 2) {
                strengthText.textContent = 'Weak';
                strengthText.style.color = '#dc3545';
            } else if (strength <= 3) {
                strengthText.textContent = 'Medium';
                strengthText.style.color = '#ffc107';
            } else {
                strengthText.textContent = 'Strong';
                strengthText.style.color = '#28a745';
            }

            return strength >= 3;
        }

        function checkPasswordsMatch() {
            const password = passwordInput.value;
            const confirmPassword = confirmPasswordInput.value;
            const match = password === confirmPassword && password.length > 0;

            if (confirmPassword.length > 0) {
                passwordMatchDiv.style.display = match ? 'none' : 'block';
            } else {
                passwordMatchDiv.style.display = 'none';
            }

            return match;
        }

        passwordInput.addEventListener('input', (e) => {
            const password = e.target.value;
            if (password.length > 0) {
                passwordStrengthDiv.style.display = 'block';
                checkPasswordStrength(password);
            } else {
                passwordStrengthDiv.style.display = 'none';
            }
            checkPasswordsMatch();
        });

        confirmPasswordInput.addEventListener('input', checkPasswordsMatch);

        document.querySelector('form').addEventListener('submit', (e) => {
            const password = passwordInput.value;
            const isStrong = checkPasswordStrength(password);
            const matches = checkPasswordsMatch();

            if (!isStrong || !matches) {
                e.preventDefault();
                alert('Please ensure your password is strong and matches the confirmation.');
            }
        });
    </script>
</body>
</html>

